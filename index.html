<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="description" content="">
<meta name="keywords" content="">
<title>Examples</title>
<!-- css -->
<style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    html {
        overflow: hidden;
    }
    body {
        background: url(images/bg.png) no-repeat;
        background: cover;
        font-size: 12px;
    }
    img{
        display: none;
    }
    #test {
        width: 400px;
        position: absolute;
        top:216px;
        left: 216px;
        text-indent: 2em;
        text-align:justify;
     }
    .imgBox {
      position: absolute;
      z-index: 520;
      transform: rotate(45deg);
      left: 10px;
      display:block;
    }
    .box {
      width: 100px;
      height: 100px;
      background: pink;
      transform: rotate(-45deg);
      position: absolute;
      top: 200px;
      right: 100px;
      display: none;
    }
    .box:before {
      content: "";
      width: 100px;
      height: 100px;
      background: pink;
      display: block;
      border-radius: 50%;
      position: absolute;  /*绝对定位*/
      top: -50px;
      left: 0;
    }

    .box:after {
      content: "";
      width: 100px;
      height: 100px;
      background: pink;
      display: block;
      border-radius: 50%;
      position: absolute;  /*绝对定位*/
      top: 0;
      left: 50px;
    }

    @-webkit-keyframes ide {
      0% {
        -webkit-transform: scale(1) rotate(-45deg);
      }

      50% {
          -webkit-transform: scale(1.5) rotate(-45deg);
      }
      100% {
          -webkit-transform: scale(1) rotate(-45deg);
      }
    }

    .scale {
      -webkit-animation: ide 1.2s linear infinite;
    }
    .imgLove {
      position: absolute;
      left: 150px;
      top: 150px;
    }
</style>
</head>
<body>

    <img class="img" src="images/love.png" height="41" width="45" alt=""/>
    <img class="img imgLove" src="images/love.gif" width="100" height="100"/>
    <div id="test"></div>
    <div class="box scale" id="box">
      <img class="imgBox" src="images/1.gif" alt="">
    </div>
    <audio src="music/2.mp3" autoplay></audio>
    <canvas id="myCanvas"></canvas>
    <script type="text/javascript">
        var arr = [],   //保存所有的XY坐标，只为验证。实际程序中可删除。
            r = 22,     //控制爱心的大小
            radian,     //弧度
            i = 0,
            radianDecrement,//弧度增量
            time = 60,//每个点之间的时间间隔
            timer,
            num = 60,//分割为 60 个点
            startRadian = Math.PI,
            canvas,
            ctx,
            w,
            h,
            imgs = document.getElementsByClassName("img");
        window.onload = function () {
            startAnimation();
        }
        // 部署绘画环境
        function startAnimation() {
            canvas = document.getElementById("myCanvas")
            ctx = canvas.getContext("2d");
            // 获取可视范围
            w = window.innerWidth;
            h = window.innerHeight;
            // 动态添加canvas 的宽度、高度
            canvas.width = w;
            canvas.height = h;
            drawHeart();
        }

        // 定义鲜花的初始点
        function drawHeart() {
            radian = startRadian;//弧度设为初始弧度
            radianDecrement = Math.PI / num * 2;
            ctx.drawImage(imgs[0],getX(radian),getY(radian));
            timer = setInterval(printHeart,time);
        }

        // 变化鲜花的拼接坐标
        function printHeart() {
            radian += radianDecrement;
            ctx.drawImage(imgs[0],getX(radian),getY(radian));
            i++;
            if (i >= num) {    //边界判断
                // 清除定时器
                clearInterval(timer);
                imgs[1].style.display="block";
                start();
            }
        }
        //由弧度得到 X 坐标
        function getX(t) {
            return 360 + r * (16 * Math.pow(Math.sin(t), 3));
        }

        //由弧度得到 Y 坐标
        function getY(t) {
            return 280 - r * (13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
        }
        //  打印机
       function start() {
           // 获取 div 的 dom
           var testDom = document.getElementById("test");
           // 创建数组
           var arr = [];
           var str = "我就是那个普通话不标准黄金身高1.70m的的骗花狂魔Ide老师！";
           arr.push(str);
           arr.push("");
           arr.push("");
           var newStr = arr.join("");
           // alert(typeof newStr);
           var newArr = newStr.split("");
           var timer = null;
           var i = 0;
           timer = setInterval(function() {
               // 判断边界
               if (i == newStr.length) {
                   clearInterval(timer);
                   document.getElementById("box").style.display = "block";
               } else {
                   // 打印出下标中的值并 += 拼接起来
                   testDom.innerHTML += "<b style='letter-spacing:2px;color:red;line-height:30px;'>" + newArr[i] + "</b>";
                   i++;
               }
           }, 100); // 1秒等于 1000毫秒
       }
    </script>
</body>
</html>